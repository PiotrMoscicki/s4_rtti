#include "object.hpp"

#include "type.hpp"

using namespace rtti;

//*************************************************************************************************
//*************************************************************************************************
//*************************************************************************************************
ObjectRef::ObjectRef(void* obj, const Type* type)
    : m_value(obj)
    , m_type(type)
{}

//*************************************************************************************************
Res<void*, ErrValue> ObjectRef::value() {

}

//*************************************************************************************************
Res<const void*, ErrValue> ObjectRef::value() const {

}

//*************************************************************************************************
Res<void*, ErrValue> ObjectRef::steal_value() && {

}

//*************************************************************************************************
Res<const Type*, ErrType> ObjectRef::type() const {

}

//*************************************************************************************************
//*************************************************************************************************
//*************************************************************************************************
Object::Object(void* obj, const Type* type) 
    : ObjectRef(obj, type) 
{

}

//*************************************************************************************************
Object::~Object() {
    if (is_valid())
        m_type->delete_object(std::move(*this));
}